function pageScroll(){var e=0;$(window).on("scroll",function(){var a=$(window).scrollTop(),s=a-e;e=a;var t=$("#header");if(s>0&&a>50)t.hide();else{if(!(s<0))return!1;t.show()}})}function scrollToTop(){$("#totop-toggle").on("click",function(e){$("html").animate({scrollTop:0},200)})}function switchTreeOrIndex(){$("#sidebar-toggle").on("click",function(){$("#sidebar").hasClass("on")?scrollOff():scrollOn()}),$("body").click(function(e){window.matchMedia("(max-width: 1100px)").matches&&($(e.target).is("#sidebar *")||$("#sidebar").hasClass("on")&&scrollOff())}),window.matchMedia("(min-width: 1100px)").matches?scrollOn():scrollOff()}function showArticleIndex(){$(".article-toc").empty(),$(".article-toc").hide(),$(".article-toc.active-toc").removeClass("active-toc"),$("#tree .active").next().addClass("active-toc");for(var e=$("#article-content").children(),a="<ul>",s=4,t=0;t<e.length;t++){var o=5;$(e[t]).is("h1")?o=1:$(e[t]).is("h2")?o=2:$(e[t]).is("h3")?o=3:$(e[t]).is("h4")&&(o=4),o<s&&(s=o)}for(t=0;t<e.length;t++){o=0;$(e[t]).is("h1")?o=1-s+1:$(e[t]).is("h2")?o=2-s+1:$(e[t]).is("h3")?o=3-s+1:$(e[t]).is("h4")&&(o=4-s+1),0!=o&&($(e[t]).before('<span class="anchor" id="_label'+t+'"></span>'),a+='<li class="level_'+o+'"><i class="fa fa-circle" aria-hidden="true"></i><a href="#_label'+t+'"> '+$(e[t]).text()+"</a></li>")}a+="</ul>",$(".article-toc.active-toc").append(a),null!=$(".article-toc a")&&0!=$(".article-toc a").length&&($(".article-toc a").on("click",function(e){e.preventDefault();var a=$(this.hash);$("body, html").animate({scrollTop:a.offset().top},500)}),$(window).on("scroll",function(e){$(".anchor").each(function(){var e=$('.article-toc a[href="#'+$(this).attr("id")+'"]');$(this).offset().top<=$(window).scrollTop()+100?e.addClass("read"):e.removeClass("read")})})),$(".article-toc.active-toc").show(),$(".article-toc.active-toc").children().show()}function pjaxLoad(){$(document).pjax("#menu a","#content",{fragment:"#content",timeout:8e3}),$(document).pjax("#tree a","#content",{fragment:"#content",timeout:8e3}),$(document).pjax("#index a","#content",{fragment:"#content",timeout:8e3}),$(document).on({"pjax:complete":function(e){$("pre code").each(function(e,a){hljs.highlightBlock(a)}),$("#tree .active").removeClass("active");var a=$("#article-title").text().trim();if(a.length){var s=$("#tree li.file").find("a:contains('"+a+"')");if(s.length){if($(".fa-minus-square-o").removeClass("fa-minus-square-o").addClass("fa-plus-square-o"),$("#tree ul").css("display","none"),s.length>1){var t=$("#article-categories span:last a").html();void 0!==t&&(t=t.trim(),s=$("#tree li.directory a:contains('"+t+"')").siblings().find("a:contains('"+a+"')"))}s[0].parentNode.classList.add("active"),showActiveTree($("#tree .active"),!0)}showArticleIndex()}}})}function serachTree(){jQuery.expr[":"].contains=function(e,a,s){return jQuery(e).text().toUpperCase().indexOf(s[3].toUpperCase())>=0},$("#search-input").on("input",function(e){e.preventDefault();var a=e.currentTarget.value;if(0===a.length)$(".fa-minus-square-o").removeClass("fa-minus-square-o").addClass("fa-plus-square-o"),$("#tree ul").css("display","none"),$("#tree .active").length?showActiveTree($("#tree .active"),!0):$("#tree").children().css("display","block");else{$(".fa-plus-square-o").removeClass("fa-plus-square-o").addClass("fa-minus-square-o"),$("#tree ul").css("display","none");var s=$("#tree li").find("a:contains('"+a+"')");s.length&&showActiveTree(s.parent(),!1)}})}function clickTreeDirectory(){var e=$("#tree .active");e.length&&showActiveTree(e,!0),$(document).on("click","#tree a[class='directory']",function(e){e.preventDefault();var a=$(this).children(".fa"),s=a.hasClass("fa-minus-square-o"),t=$(this).siblings("ul");a.removeClass("fa-minus-square-o").removeClass("fa-plus-square-o"),s?(void 0!==t&&t.slideUp({duration:100}),a.addClass("fa-plus-square-o")):(void 0!==t&&t.slideDown({duration:100}),a.addClass("fa-minus-square-o"))})}function showActiveTree(e,a){"tree"!==e.attr("id")&&(e.is("ul")&&(e.css("display","block"),a&&(e.siblings().css("display","block"),e.siblings("a").css("display","inline"),e.siblings("a").find(".fa-plus-square-o").removeClass("fa-plus-square-o").addClass("fa-minus-square-o"))),e.each(function(){showActiveTree($(this).parent(),a)}))}function scrollOn(){var e=$("#sidebar"),a=$("#content"),s=$("#header"),t=$("#footer"),o=$("#sidebar-toggle i");o.addClass("fa-close"),o.removeClass("fa-arrow-right"),e.addClass("on"),e.removeClass("off"),window.matchMedia("(min-width: 1100px)").matches&&(a.addClass("content-on"),a.removeClass("content-off"),s.addClass("header-on"),s.removeClass("off"),t.addClass("header-on"),t.removeClass("off"))}function scrollOff(){var e=$("#sidebar"),a=$("#content"),s=$("#header"),t=$("#footer"),o=$("#sidebar-toggle i");o.addClass("fa-arrow-right"),o.removeClass("fa-close"),e.addClass("off"),e.removeClass("on"),a.addClass("off"),a.removeClass("content-on"),s.addClass("off"),s.removeClass("header-on"),t.addClass("off"),t.removeClass("header-on")}$(document).ready(function(){hljs.initHighlightingOnLoad(),clickTreeDirectory(),serachTree(),pjaxLoad(),showArticleIndex(),switchTreeOrIndex(),scrollToTop(),pageScroll()});